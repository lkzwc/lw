{
  "bsonType": "object",
  "required": ["title", "description", "category", "location", "price", "priceUnit", "userId", "username", "status", "createTime", "updateTime"],
  "permission": {
    ".read": "doc.status == 1",
    ".create": "auth.uid != null",
    ".update": "auth.uid == doc.userId",
    ".delete": "auth.uid == doc.userId"
  },
  "properties": {
    "_id": {
      "description": "文档ID，系统自动生成"
    },
    "title": {
      "bsonType": "string",
      "description": "技能标题",
      "label": "技能标题",
      "minLength": 2,
      "maxLength": 50,
      "errorMessage": {
        "required": "技能标题不能为空",
        "minLength": "技能标题至少2个字符",
        "maxLength": "技能标题不能超过50个字符"
      }
    },
    "description": {
      "bsonType": "string",
      "description": "技能描述",
      "label": "技能描述",
      "minLength": 10,
      "maxLength": 500,
      "errorMessage": {
        "required": "技能描述不能为空",
        "minLength": "技能描述至少10个字符",
        "maxLength": "技能描述不能超过500个字符"
      }
    },
    "category": {
      "bsonType": "string",
      "description": "服务分类",
      "label": "服务分类",
      "enum": ["housekeeping", "repair", "education", "beauty", "health", "other"],
      "errorMessage": {
        "required": "请选择服务分类",
        "enum": "服务分类无效"
      }
    },
    "location": {
      "bsonType": "string",
      "description": "服务位置",
      "label": "服务位置",
      "minLength": 2,
      "maxLength": 50,
      "errorMessage": {
        "required": "服务位置不能为空",
        "minLength": "服务位置至少2个字符",
        "maxLength": "服务位置不能超过50个字符"
      }
    },
    "price": {
      "bsonType": "number",
      "description": "服务价格",
      "label": "服务价格",
      "minimum": 0.01,
      "maximum": 99999,
      "errorMessage": {
        "required": "请输入服务价格",
        "minimum": "服务价格必须大于0",
        "maximum": "服务价格不能超过99999"
      }
    },
    "priceUnit": {
      "bsonType": "string",
      "description": "价格单位",
      "label": "价格单位",
      "enum": ["小时", "次", "天", "课时", "项目"],
      "errorMessage": {
        "required": "请选择价格单位",
        "enum": "价格单位无效"
      }
    },
    "tags": {
      "bsonType": "array",
      "description": "技能标签",
      "label": "技能标签",
      "maxItems": 5,
      "items": {
        "bsonType": "string",
        "maxLength": 10
      },
      "errorMessage": {
        "maxItems": "最多只能添加5个标签"
      }
    },
    "images": {
      "bsonType": "array",
      "description": "服务图片",
      "label": "服务图片",
      "maxItems": 6,
      "items": {
        "bsonType": "string"
      },
      "errorMessage": {
        "maxItems": "最多只能上传6张图片"
      }
    },
    "phone": {
      "bsonType": "string",
      "description": "联系电话",
      "label": "联系电话",
      "pattern": "^1[3-9]\\d{9}$",
      "errorMessage": {
        "pattern": "请输入有效的手机号码"
      }
    },
    "wechat": {
      "bsonType": "string",
      "description": "微信号",
      "label": "微信号",
      "minLength": 6,
      "maxLength": 20,
      "errorMessage": {
        "minLength": "微信号至少6个字符",
        "maxLength": "微信号不能超过20个字符"
      }
    },
    "userId": {
      "bsonType": "string",
      "description": "发布用户ID",
      "label": "发布用户ID",
      "forceDefaultValue": {
        "$env": "uid"
      },
      "errorMessage": {
        "required": "用户ID不能为空"
      }
    },
    "username": {
      "bsonType": "string",
      "description": "发布用户名",
      "label": "发布用户名",
      "errorMessage": {
        "required": "用户名不能为空"
      }
    },
    "userAvatar": {
      "bsonType": "string",
      "description": "用户头像",
      "label": "用户头像"
    },
    "rating": {
      "bsonType": "number",
      "description": "评分",
      "label": "评分",
      "minimum": 0,
      "maximum": 5,
      "default": 5.0
    },
    "reviewCount": {
      "bsonType": "int",
      "description": "评价数量",
      "label": "评价数量",
      "minimum": 0,
      "default": 0
    },
    "viewCount": {
      "bsonType": "int",
      "description": "浏览次数",
      "label": "浏览次数",
      "minimum": 0,
      "default": 0
    },
    "status": {
      "bsonType": "int",
      "description": "状态：1-已发布 0-草稿 -1-已删除",
      "label": "状态",
      "enum": [1, 0, -1],
      "default": 1,
      "errorMessage": {
        "required": "状态不能为空",
        "enum": "状态值无效"
      }
    },
    "createTime": {
      "bsonType": "timestamp",
      "description": "创建时间",
      "label": "创建时间",
      "forceDefaultValue": {
        "$env": "now"
      },
      "errorMessage": {
        "required": "创建时间不能为空"
      }
    },
    "updateTime": {
      "bsonType": "timestamp",
      "description": "更新时间",
      "label": "更新时间",
      "forceDefaultValue": {
        "$env": "now"
      },
      "errorMessage": {
        "required": "更新时间不能为空"
      }
    }
  }
}